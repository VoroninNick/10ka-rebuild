<!-- Shadow area -->
<div class="shadow-top"></div>
<!-- /Shadow area -->
<!-- Catalog area -->
<div id="sponsor-parent" class="page-indent">
<div id="sponsor-wrapper" class="container">
  <%# cache do %>
    <% fetch_sponsors.each do |sponsor_item| %>
      <div style="" class="g2 <%= cycle('alpha', '', 'row_2_items-alpha', 'row_3_items-alpha', 'row_2_items-alpha', '') %> sponsor-item">
        <%= link_to( image_tag(sponsor_item.sponsor.url, :alt => sponsor_item.description, :style => ''), sponsor_item.link ) %>
      </div>
    <% end %>
  <%# end %>
</div>
</div>
<!-- /Catalog area -->
<!-- Shadow area -->
<div class="shadow-bottom"></div>
<!-- /Shadow area -->

<script type="text/javascript">

	function initSize(){
	//if(window.innerWidth<960){
			var area_width=$('#sponsor-wrapper').width();
			console.log('area-width:'+area_width);
			var item_width=$('#sponsor-wrapper .g2.sponsor-item').width()+4;
			var items_per_row;

			//var first_indent=30;
			//var last_inent=30;

			//min_indent=5;

			var margin_top='auto';
			if(area_width>=960){
				items_per_row=6;
			}
			else if(area_width<=609 && area_width>=475)
			{
				items_per_row=3;
			}	

			else if(area_width<475 )
			{
				items_per_row=2;
			}
			else 
			{
				items_per_row=3;
				margin_top='20px';
			}

			var margin_left=(area_width - (items_per_row*item_width)) / (items_per_row+1);
			console.log('area:'+area_width+';items_per_row:'+items_per_row+';item_width:'+item_width+';margin_left:'+margin_left);
			if(margin_top=='auto'){
				margin_top=margin_left;
			}
			$('#sponsor-wrapper .g2.sponsor-item').css({'margin-left':margin_left});
			if(items_per_row!=6){

				$('#sponsor-wrapper .g2.sponsor-item').each(function(index,item){
					var $item=$(item);
					if( index > items_per_row - 1 ){
						$item.css({'margin-top':margin_top});
					}
					else{
						$item.css({'margin-top':0});
					}
				});
			}
		//}
		//else
		//{
			//console.log('area width:'+$());
		//	$('#sponsor-wrapper .g2').attr('style','');
		//}

}
	//$(window).resize(initSize);
	//initSize();
	

</script>
